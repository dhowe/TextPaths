<html>

<head>
  <meta charset="UTF-8">
  <script src="lib/munkres.js"></script>
  <script src="lib/p5.js"></script>
  <script src="vehicle.js"></script>
  <script src="wordlist.js"></script>
  <script src="letter.js"></script>
</head>

<body>
</body>

<script>
// NEXT: fix incorrect curves (letters.html) *** (S->S is good ex)
// NEXT: fix/minimize breaking lines on transitions (D->F is good ex)
// NEXT: fix initial positions (do 1 letter without draw loop, then see alphabet.html)

// OPT:  do bestPairings
// BUG:  fix fill for interior paths (if contained)

var letter, seq = 'SBASDFA', sidx = -1, test = 0; // tmp

function setup() {

  createCanvas(600, 400);
  background(245);
  frameRate(5);

  loadFont('fonts/ArialUnicode.ttf', function(f) {
    letter = new Letter(f, seq[0], 100, 300, 300);
  });

  next();
}

function draw() {

  stroke(255);
  background(0);
  letter && letter.draw();
  Vehicle.drawAll();
}

function next() {
  if (letter && letter.inPosition()) {
    if (seq && seq.length)
      letter.morph(seq[++sidx%seq.length]);
    else
      letter.morph(Letter.random());
  }
  test || setTimeout(next, 100);
}

function keyReleased() {
  if (!test) {
    test = 1;
    return;
  }
  key === ' ' && next();
}

function logV(v) {
  setTimeout(function() {
    var s = '';
    for (var i = 0; i < v.length; i++)
      s += "("+round(v[i].pos.x)+','+round(v[i].pos.y)+") ";
    console.log(s);
  }, 1500);
}

</script>
</html>
